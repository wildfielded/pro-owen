# Вариант решения Desktop-приложения для вывода данных из HTML #

Выполняется на рабочей станции, смотрит HTML на сервере или сам генерит его.

### Динамическое (постепенно меняющееся) ТЗ ###

1. Исходное задание [осталось прежним](https://github.com/wildfielded/pet-owen/blob/master/README.md).
Теперь требуется создание самостоятельного приложения для рабочих станций под
Windows.
2. **Проходной вариант**. Графическое приложение обращается по HTTP к серверу,
на котором крутится решение из
[**Proof of Concept**](https://github.com/wildfielded/pet-owen/tree/master/PoC).
Получается совсем просто&nbsp;&mdash; избавление от браузера, чтобы попробовать
связку **PyQt5** и **PyQtWebEngine**. Либо создаёт себе локально HTML-файл
аналогично
[**Proof of Concept**](https://github.com/wildfielded/pet-owen/tree/master/PoC)
и выводит его в своём окне. Попутно отработать выполнение фоновых процессов и
появление дополнительных окон при настройке и алертах.
3. Самостоятельное графическое приложение с **PyQt5** выводит табличные данные.

----

### Done (что сделано) ###

- Опробованы варианты работы с серверами и с локальным HTML-файлом.
- Создаётся тулбар для размещения кнопок. Кнопки с иконками и текстом.
- Заработали кнопки **АРМ** (чтение локального **`index.html`**),
**"Сервер-1"**, **"Сервер-2"** (для соединения к основному или резервному
вэб-серверу) и **"Выход"** (с очевидными последствиями).
- Переход формата конфига на более привычный для "виндовозов" INI-вид.
Используется модуль `configparser` из стандартной бибиотеки.
- Решили убрать кнопку **"Настройки"**. Ибо нефиг. Что надо, администратор
поменяет в INI-файле.
- Для фоновой работы по генерации локального HTML-файла используется модуль
`PyQt5.QtCore.QThread`. Эксперименты со стандартными `multiprocessing` и
`subprocess` не работают после сборки под Windows. Использованы готовые функции
**`main.py`** из
[**`PoC`**](https://github.com/wildfielded/pet-owen/tree/master/PoC) (он
присутствует в виде модуля **`HTMLCreator.py`**, несколько модифицированный).
- **Pyinstaller** собирает исполняемый файл для Windows, чтобы работать без
установки на рабочей станции Python и всех требуемых зависимостей.

----

### Добавки ###

[**`.ADDS`**](https://github.com/wildfielded/pet-owen/tree/master/WinWebView/.ADDS)&nbsp;&mdash;
дополнительные вещи и телодвижения для деплоя.

Примерный вид из рабочего окна:

![screenshot-1](https://github.com/wildfielded/pet-owen/blob/master/WinWebView/.ADDS/shot1.png)

----

### Doing (ближайшие планы) ###

- Web-движок не даёт играть музыку. Придётся через PyQt5?
- Убрать из генерации HTML кнопку &laquo;Выключить звук&raquo; за ненадобностью.
Вместо этого выводить аларм с кнопкой и звуком в отдельном окне.
- Прикинуть, нужны ли логи с ротацией, пишущиеся локально, или лучше выводить
алармы в отдельном окне.
- По смыслу жизни, в окончательном варианте из всех кнопок можно оставить только
&laquo;Выход&raquo;, да и от той избавиться, можно закрывать по кресту.
Максимальное упрощение в эксплуатации для персонала.

----

### ToDo (прекрасные мечты) ###

- Реализация конфигурирования через меню настроек в диалоговом окне (исключительно
для прокачки, для рабочего варианта программы не требуется).
- Улучшайзинг кода и фиченаворотинг. Попытаться сделать код более оптимальным и
читабельным по мере прокачки экспы.

----
